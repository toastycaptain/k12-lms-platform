# StudentApp (SwiftUI Scaffold)

This folder contains a native iOS student app scaffold aligned to:

- `iOS/CODEX_IOS_STUDENT_APP_MASTER_PLAN.md`
- `iOS/CODEX_IOS_PORTFOLIO_PLACEHOLDER_PLAN.md`

Current scope implemented:

- App core environment config (`Dev/Staging/Prod`)
- Session bootstrap (`GET /api/v1/me`) and CSRF-aware API client
- Tile dashboard with routes for requested student features
- Portfolio placeholder module with feature flag and analytics hooks

Notes:

- API calls remain under `/api/v1`.
- Portfolio live mode is disabled by default (`portfolioLiveEnabled = false`).
- Mobile token endpoints (`/api/v1/mobile/*`) are available in backend parity work and can be integrated next.
- Sign-in bypass enabled by default for local testing: app boots directly into dashboard with a test student.

## Running in Xcode

1. Open `iOS/StudentApp/StudentApp.xcodeproj` in Xcode.
2. Select scheme `StudentApp`.
3. Choose an iOS Simulator (for example iPhone 16).
4. Press Run.

### CLI build check

```bash
cd iOS/StudentApp
xcodebuild -project StudentApp.xcodeproj -scheme StudentApp -destination 'generic/platform=iOS Simulator' build
```

### Auth bypass control

- Default behavior: bypass enabled (`K12_IOS_AUTH_BYPASS=true`) and app launches straight to dashboard.
- To re-enable real session checks:

```bash
K12_IOS_AUTH_BYPASS=false
```

- Optional test identity overrides:
  - `K12_IOS_TEST_STUDENT_ID`
  - `K12_IOS_TEST_STUDENT_EMAIL`
  - `K12_IOS_TEST_STUDENT_FIRST_NAME`
  - `K12_IOS_TEST_STUDENT_LAST_NAME`
  - `K12_IOS_TEST_TENANT_ID`
  - `K12_IOS_TEST_TENANT_NAME`
  - `K12_IOS_TEST_TENANT_SLUG`

## Project generation

The Xcode project is generated by XcodeGen from `iOS/StudentApp/project.yml`.

If target settings or files change, regenerate:

```bash
cd iOS/StudentApp
xcodegen generate
```
